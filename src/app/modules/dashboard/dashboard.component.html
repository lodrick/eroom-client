<div>
  <app-widget-area></app-widget-area>
</div>
<br/>
<mat-divider></mat-divider>
<br/>
<div fxLayout="row"
fxLayoutAlign="space-between center"
fxLayoutGap="20px"
class="stats-card">
<mat-card fxFlex="23" >
  <app-widget-card
    label="Total users "
    total="{{totalUsers}}"
    percentage="50"
    
  ></app-widget-card>
</mat-card>
 <mat-card fxFlex="23">
    <app-widget-card
      label="Registed users today"
      total="{{registeredUsersToday}}"
      percentage="50"
      
    ></app-widget-card>
  </mat-card>
  <mat-card fxFlex="23">
    <app-widget-card
      label="Active users"
      total="480K"
      percentage="50"
      
    ></app-widget-card>
  </mat-card>

  <mat-card fxFlex="23">
    <app-widget-card
      label="Progression rates"
      total="191K"
      percentage="50"
      
    ></app-widget-card>
  </mat-card>
</div>
<br/>
<mat-divider></mat-divider>
<br/>


<div fxLayout="row" fxLayoutAlign="space-between center" fxLayoutGap="20px">
  <div fxFlex="100">
    
    <div class="search-div">
      <mat-form-field class="search-form-field" floatLabel="never">
        <input matInput [(ngModel)]="searchKey" placeholder="Search" autocomplete="off" (keyup)="applyFilter()"/>
        <button mat-button matSuffix mat-icon-button aria-label="Clear" *ngIf="searchKey" (click)="onSearchClear()">
          <mat-icon>close</mat-icon>
        </button>
      </mat-form-field>
    </div>
    
    <div class="mat-elevation-z8">
      <table mat-table [dataSource]="dataSource" matSort>
        <!-- RoomType Column -->
        <ng-container matColumnDef="index">
          <th mat-header-cell *matHeaderCellDef>#</th>
          <td mat-cell *matCellDef="let element, let i = index">
            {{ (i+1) + (paginator.pageIndex * paginator.pageSize)}}
          </td>
        </ng-container>
        <!-- RoomType Column -->
        <ng-container matColumnDef="roomType">
          <th mat-header-cell *matHeaderCellDef mat-sort-header>Room Type</th>
          <td mat-cell *matCellDef="let element">{{ element.roomType }}</td>
        </ng-container>

        <!-- Price Column -->
        <ng-container matColumnDef="price">
          <th mat-header-cell *matHeaderCellDef mat-sort-header>Price</th>
          <td mat-cell *matCellDef="let element">{{ element.price }}</td>
        </ng-container>

        <!-- Title Column -->
        <ng-container matColumnDef="title">
          <th mat-header-cell *matHeaderCellDef mat-sort-header>Title</th>
          <td mat-cell *matCellDef="let element">{{ element.title }}</td>
        </ng-container>
        
        <!-- Description Column -->
        <ng-container matColumnDef="description">
          <th mat-header-cell *matHeaderCellDef>Description</th>
          <td mat-cell *matCellDef="let element">{{ element.description }}</td>
        </ng-container>
        
        <!-- Province Column -->
        <ng-container matColumnDef="province">
          <th mat-header-cell *matHeaderCellDef>Province</th>
          <td mat-cell *matCellDef="let element">{{ element.province }}</td>
        </ng-container>

        <!-- City Column -->
        <ng-container matColumnDef="city">
          <th mat-header-cell *matHeaderCellDef>City</th>
          <td mat-cell *matCellDef="let element">{{ element.city }}</td>
        </ng-container>

        <!-- City Column -->
        <ng-container matColumnDef="status">
          <th mat-header-cell *matHeaderCellDef>Status</th>
          <td mat-cell *matCellDef="let element">{{ element.status }}</td>
        </ng-container>

        <!-- Status Column Update-->
        <ng-container matColumnDef="action">
          <th mat-header-cell *matHeaderCellDef>Status Update</th>
          <td mat-cell *matCellDef="let element; let i = index">
            <mat-button-toggle-group [value]="selectedState" (change)="onToggleStatusChange($event, i, element)">
              <mat-button-toggle class="bg-success" value="toggleEnum.APPROVED"><mat-icon>check</mat-icon></mat-button-toggle>
              <mat-button-toggle class="bg-warning" value="toggleEnum.PENDING"><mat-icon>hourglass_full</mat-icon></mat-button-toggle>
              <mat-button-toggle class="bg-danger" value="toggleEnum.DECLINED"><mat-icon>close</mat-icon></mat-button-toggle>
            </mat-button-toggle-group>
          </td>
        </ng-container>

        <ng-container matColumnDef="loading">
          <mat-footer-cell *matFooterCellDef colspan="6">
            Loading data...
          </mat-footer-cell>
        </ng-container>
        <ng-container matColumnDef="noData">
          <mat-footer-cell *matFooterCellDef colspan="6">
            No data.
          </mat-footer-cell>
        </ng-container>
         
        <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
        <tr mat-row *matRowDef="let row; columns: displayedColumns"></tr>
        <mat-footer-row *matFooterRowDef="['loading']" [ngClass]="{'hide':dataSource!=null}"></mat-footer-row>
        <mat-footer-row *matFooterRowDef="['noData']" [ngClass]="{'hide':!(dataSource!=null && dataSource.data.length==0)}"></mat-footer-row>
      </table>
      <mat-paginator [pageSizeOptions]="[5, 10, 20]" [pageSize]="5"
                 showFirstLastButtons 
                 aria-label="Select page of periodic elements">
      </mat-paginator>

    </div>
  </div>
  
</div>